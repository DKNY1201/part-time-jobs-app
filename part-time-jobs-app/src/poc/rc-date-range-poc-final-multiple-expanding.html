<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            background: #1d2531;
            margin: 10px;
            font-family: "Segoe UI", Helvetica, sans-serif;
        }

        #container > div {
            background-color: white;
            border-radius: 5px;
            color: #222222;
        }

        /*#container > div.col-1 {*/
            /*background-color: #F7717D;*/
        /*}*/

        /*#container > div.col-2 {*/
            /*background-color: #88d8b0;*/
        /*}*/

        /*#container > div.col-3 {*/
            /*background-color: #D0A98F;*/
        /*}*/

        /*#container > div.col-4 {*/
            /*background-color: #ffcc5c;*/
        /*}*/

        /*#container > div.col-5 {*/
            /*background-color: #C7D9B7;*/
        /*}*/

        /*#container > div.col-6 {*/
            /*background-color: #4D243D;*/
        /*}*/

        #container {
            display: grid;
            grid-auto-rows: 10px;
            grid-gap: 10px;
            grid-auto-flow: dense;
        }

        .card {
            display: flex;
            flex-flow: column;
            /*justify-content: center;*/
            align-items: center;
            font-size: 2em;
            color: #ffeead;
            overflow: hidden;
            cursor: pointer;
        }

        .card.header {
            justify-content: center;
            text-align: center;
            background-color: #354052 !important;
            color: white !important;
            font-size: 18px;
        }

        .card .content {
            width: 100%;
        }

        .card .main-area {
            overflow: hidden;
        }

        .card .main-area img{
            width: 120px;
            float: left;
            margin-right: 10px;
        }

        .card .main-area h6 {
            font-size: 16px;
            margin-top: 5px;
        }

        .card .main-area p {
            font-size: 16px;
        }

        .card .main-area .num-of-releases {
            color: #666;
            margin-top: 7px;
        }

        .card .description {
            font-size: 16px;
            display: none;
            clear: both;
            margin-top: 20px;
            padding: 0 5px;
        }

        .card .description .release {
            padding: 5px;
        }

        .card .description .release-desc > p:first-child {
            font-weight: bold;
        }

        .card .description .release-desc > p {
            margin-bottom: 5px;
        }

        /*.card .description .release:nth-child(n) {*/
            /*background: #ccc;*/
        /*}*/

        .card .description .release:nth-child(2n) {
            background: #eee;
        }

        .card .description .release:last-child {
            border-bottom: none;
        }

        .card .description .release-date {
            float: right;
        }

        .card.expanded .description {
            display: block;
        }
    </style>
</head>
<body>
<div id="container">
</div>

<script>
  const data = [
    {
      MonthYear: "July 2018",
      Col: 1,
      Data: [
        {
          Row: 1,
          Span: 1,
          Item: {
            "TitleName": "Halo Wars 2",
            "CodeName": "Hogan",
            "ReleaseDescription": "Pre-Order",
            "PlatformType": "Xbox One",
            "RTWDate": "2016-06-13T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/52065745-DD14-47CB-94CB-A02E3BB2CA04.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2162,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloWars2.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1

          }
        },
        {
          Row: 2,
          Span: 2,
          Item: {
            "TitleName": "Halo 5: Guardians",
            "CodeName": "Osiris",
            "ReleaseDescription": "Apr 2016 CU ",
            "PlatformType": "Xbox One",
            "RTWDate": "2016-04-06T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/584BAEDF-3290-40AC-89C4-D0374B4FDF12.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2168,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_Halo5Guardians.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 3,
          Span: 3,
          Item: {
            "TitleName": "Halo Channel",
            "CodeName": "",
            "ReleaseDescription": "",
            "PlatformType": "Android",
            "RTWDate": "2015-10-26T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/B70CAEE8-1B9E-459F-B206-20A7AD18C99F.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2184,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 6,
            "PlatformSortOrder": 14
          }
        },
        {
          Row: 4,
          Span: 1,
          Item: {
            "TitleName": "Halo Online Russia",
            "CodeName": "El Dorado",
            "ReleaseDescription": "Open Beta",
            "PlatformType": "Windows 7/8",
            "RTWDate": "2015-11-15T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "External Beta",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/E2CEDE61-7E73-4205-A9AC-3E2DDB0EFBA4.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2188,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 11,
            "PlatformSortOrder": 100
          }
        },
        {
          Row: 5,
          Span: 1,
          Item: {
            "TitleName": "Halo: Reach",
            "CodeName": "",
            "ReleaseDescription": "",
            "PlatformType": "Xbox One",
            "RTWDate": "2015-12-17T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/571195EC-9742-48AC-97B1-98748C5AE27C.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2189,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Halo: Spartan Assault",
            "CodeName": "",
            "ReleaseDescription": "",
            "PlatformType": "iOS",
            "RTWDate": "2015-09-15T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/D74121DF-06F7-4693-B270-C028FD4D1B84.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2190,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloSpartanAssault.png",
            "PlatformID": 5,
            "PlatformSortOrder": 13
          }
        }
      ]
    },
    {
      MonthYear: "August 2018",
      Col: 2,
      Data: [
        {
          Row: 1,
          Span: 1,
          Item: {
            "TitleName": "Cobalt Minecraft",
            "CodeName": "Cobalt",
            "ReleaseDescription": "Cobalt",
            "PlatformType": "Steam",
            "RTWDate": "2016-02-02T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/AA6DF0AF-963B-4494-B9BC-2B0CAE7D0C76.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2304,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Cobalt",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 4,
            "PlatformSortOrder": 3
          }
        },
        {
          Row: 2,
          Span: 2,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Redstone",
            "ReleaseDescription": "Xbox Live and Realms",
            "PlatformType": "Android",
            "RTWDate": "2016-06-13T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/C8A00202-4203-4E5A-95F0-9E4A7C0A626E.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2310,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "",
            "PlatformID": 6,
            "PlatformSortOrder": 14
          }
        },
        {
          Row: 3,
          Span: 1,
          Item: {
            "TitleName": "Forza Motorsport 7",
            "CodeName": "Apollo",
            "ReleaseDescription": "",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-10-03T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/C5594FC6-AAFE-4B8E-BFFA-ADE305487788.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2452,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport7.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 4,
          Span: 3,
          Item: {
            "TitleName": "Forza Horizon 2",
            "CodeName": "Anthem",
            "ReleaseDescription": "10 Year Anniversary Car Pack",
            "PlatformType": "Xbox One",
            "RTWDate": "2015-09-10T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/F7A4454A-229A-4395-AA62-76EC71C88D1E.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2461,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_Turn10Logo.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 5,
          Span: 3,
          Item: {
            "TitleName": "Forza Horizon 3",
            "CodeName": "Opus",
            "ReleaseDescription": "",
            "PlatformType": "Windows 10",
            "RTWDate": "2016-09-27T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/561BD1E9-02AA-49C1-9AC1-B03867B5F4A3.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2465,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaHorizon3.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Forza Motorsport 5",
            "CodeName": "Monument",
            "ReleaseDescription": "Pegasus",
            "PlatformType": "Xbox One",
            "RTWDate": "2016-01-15T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/25ba1f7f-3506-4612-aaab-a48122df81f8.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2500,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": "1900-01-01T00:00:00",
            "GPEndDate": "1900-01-01T00:00:00",
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport5.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        }
      ]
    },
    {
      MonthYear: "September 2018",
      Col: 3,
      Data: [
        {
          Row: 1,
          Span: 3,
          Item: {
            "TitleName": "Forza Motorsport 5",
            "CodeName": "Monument",
            "ReleaseDescription": "CU 1",
            "PlatformType": "Xbox One",
            "RTWDate": "2016-11-29T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/f99fe797-0b1c-4440-8fcf-9396ff081d76.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2520,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": "1900-01-01T00:00:00",
            "GPEndDate": "1900-01-01T00:00:00",
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport5.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 2,
          Span: 1,
          Item: {
            "TitleName": "Forza Motorsport 5",
            "CodeName": "Monument",
            "ReleaseDescription": "Car Pack 1",
            "PlatformType": "Windows 10",
            "RTWDate": "2016-11-07T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/F7A4454A-229A-4395-AA62-76EC71C88D1E.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2527,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport5.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 3,
          Span: 2,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Redstone",
            "ReleaseDescription": "CU49",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-08-28T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/a76fd153-49a5-4398-891e-7b3dc50fb481.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2565,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 4,
          Span: 4,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Redstone",
            "ReleaseDescription": "Glide Myths Track Pack",
            "PlatformType": "Xbox 360",
            "RTWDate": "2017-08-29T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/4e996911-3abc-4fd0-a1cb-390579bbc72c.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2570,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "",
            "PlatformID": 3,
            "PlatformSortOrder": 4
          }
        },
        {
          Row: 5,
          Span: 2,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Bedrock",
            "ReleaseDescription": "Better Together",
            "PlatformType": "Android",
            "RTWDate": "2017-09-20T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/d87bae99-5cb5-47a7-81e9-a283c80e1524.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2603,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 6,
            "PlatformSortOrder": 14
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Forza Motorsport 7 Demo",
            "CodeName": "Apollo Demo",
            "ReleaseDescription": "FM7 Demo",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-19T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Demo",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/C5594FC6-AAFE-4B8E-BFFA-ADE305487788.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2637,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport7.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        }
      ]
    },
    {
      MonthYear: "October 2018",
      Col: 4,
      Data: [
        {
          Row: 1,
          Span: 3,
          Item: {
            "TitleName": "Forza Motorsport 7 Early Access",
            "CodeName": "Apollo Early Access",
            "ReleaseDescription": "Forza Motorsport 7 Ultimate Edition Early Access",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-29T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/C5594FC6-AAFE-4B8E-BFFA-ADE305487788.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2639,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport7.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 2,
          Span: 1,
          Item: {
            "TitleName": "Halo Recruit",
            "CodeName": "Fun House",
            "ReleaseDescription": "Windows MR demo for Microsoft Stores & download",
            "PlatformType": "Windows 10",
            "RTWDate": "2017-10-17T00:00:00",
            "RTMDate": "2017-09-29T00:00:00",
            "ReleaseType": "Demo",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/Halo%20Recruit.jpg",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2641,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 3,
          Span: 2,
          Item: {
            "TitleName": "Halo 3 (Backward Compatible)",
            "CodeName": "",
            "ReleaseDescription": "Xbox 360 back compat release of Halo 3",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-21T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/c85c1ed2-b5e7-4113-8ad2-0529c13c24d6.jpg",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2645,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 4,
          Span: 4,
          Item: {
            "TitleName": "Halo 4 (Backward Compatible)",
            "CodeName": "",
            "ReleaseDescription": "Xbox 360 back compat release of Halo 4",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-21T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/de633a17-2363-460e-9498-57db14eb1196.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2647,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_Halo4.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 5,
          Span: 2,
          Item: {
            "TitleName": "Halo: CE Anniversary (Backward Compatible)",
            "CodeName": "",
            "ReleaseDescription": "\nXbox 360 back compat release of Halo: CE Anniversary",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-21T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/1a9caa53-1e07-40ab-98ca-7bf159699f6a.jpg",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2648,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Halo 3: ODST (Backward Compatible)",
            "CodeName": "",
            "ReleaseDescription": "Xbox 360 back compat release of Halo 3: ODST",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-21T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/5fc7f274-40d5-476c-b576-0bff46dea1ff.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2649,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_Halo3ODST.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        }
      ]
    },
    {
      MonthYear: "November 2018",
      Col: 5,
      Data: [
        {
          Row: 1,
          Span: 3,
          Item: {
            "TitleName": "Halo 5: Forge",
            "CodeName": "Ausar",
            "ReleaseDescription": "Halo 5: Forge for Windows 10",
            "PlatformType": "Windows 10",
            "RTWDate": "2016-09-08T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Base",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/63dab7cd-cc48-4e26-b4f5-60b783049bc6.jpg",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2650,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_Halo5Forge.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 2,
          Span: 1,
          Item: {
            "TitleName": "Halo Wars 2",
            "CodeName": "Hollywood",
            "ReleaseDescription": "Awakening the Nightmare",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-09-26T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/pt_awakening_the_nightmare.png",
            "StudioName": "343i",
            "Editable": false,
            "ReleaseID": 2651,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Halo",
            "TitleImageUrl": "/pt2images/BoxArt_HaloLogo.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 3,
          Span: 2,
          Item: {
            "TitleName": "Forza Motorsport 7",
            "CodeName": "Apollo",
            "ReleaseDescription": "Scorpio Update",
            "PlatformType": "Xbox One",
            "RTWDate": "2017-11-07T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/C5594FC6-AAFE-4B8E-BFFA-ADE305487788.png",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2653,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport7.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 4,
          Span: 4,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Bedrock",
            "ReleaseDescription": "12 Days of Minecraft Promotion",
            "PlatformType": "Windows 10",
            "RTWDate": "2017-12-21T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/d87bae99-5cb5-47a7-81e9-a283c80e1524.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2663,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 5,
          Span: 2,
          Item: {
            "TitleName": "Minecraft: Education Edition",
            "CodeName": "",
            "ReleaseDescription": "The Chemistry Update",
            "PlatformType": "Windows 10",
            "RTWDate": "2018-02-07T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/d87bae99-5cb5-47a7-81e9-a283c80e1524.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2671,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Casual Suite: Solitaire",
            "CodeName": "Casual Suite: Solitaire",
            "ReleaseDescription": "RS6 Day 0 Udpate",
            "PlatformType": "Windows 10",
            "RTWDate": "2019-04-03T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/Solitaire.png",
            "StudioName": "Windows Casual",
            "Editable": false,
            "ReleaseID": 2722,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": "1900-01-01T00:00:00",
            "GPEndDate": "1900-01-01T00:00:00",
            "FranchiseName": "Casual Suite",
            "TitleImageUrl": "/pt2images/82ca76c7-d64f-45aa-acaa-fdcbd66c58f2.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        }
      ]
    },
    {
      MonthYear: "December 2018",
      Col: 6,
      Data: [
        {
          Row: 1,
          Span: 3,
          Item: {
            "TitleName": "Minecraft: Java Edition",
            "CodeName": "Mojang",
            "ReleaseDescription": "Technically Updated - TBD Feb",
            "PlatformType": "Windows 8",
            "RTWDate": "2018-02-28T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/aa6cd557-0df1-4b3f-b922-baf1ee608e46.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2749,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 7,
            "PlatformSortOrder": 11
          }
        },
        {
          Row: 2,
          Span: 1,
          Item: {
            "TitleName": "Minecraft: Java Edition",
            "CodeName": "Mojang",
            "ReleaseDescription": "Technically Updated - TBD Feb",
            "PlatformType": "macOS",
            "RTWDate": "2018-02-28T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/aa6cd557-0df1-4b3f-b922-baf1ee608e46.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2751,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 19,
            "PlatformSortOrder": 12
          }
        },
        {
          Row: 3,
          Span: 2,
          Item: {
            "TitleName": "Minecraft",
            "CodeName": "Bedrock",
            "ReleaseDescription": "Egyptian Mythology Mash-Up - May TBD",
            "PlatformType": "Windows 10",
            "RTWDate": "2018-05-31T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/adc85060-b636-42e2-9be1-3a1aefebef09.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2766,
            "GADateFormat": null,
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 1,
            "PlatformSortOrder": 2
          }
        },
        {
          Row: 4,
          Span: 4,
          Item: {
            "TitleName": "Minecraft: Console Edition",
            "CodeName": "",
            "ReleaseDescription": "CU65 and TU56",
            "PlatformType": "Xbox One",
            "RTWDate": "2018-05-28T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "Content Update",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/e92756e6-0830-4f7d-8d1f-1a80fb2c923d.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2817,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 5,
          Span: 2,
          Item: {
            "TitleName": "Minecraft: Console Edition",
            "CodeName": "",
            "ReleaseDescription": "Egyptian Mythology Mash-up",
            "PlatformType": "Xbox One",
            "RTWDate": "2018-05-28T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "POR",
            "ReleaseImageUrl": "/pt2images/e92756e6-0830-4f7d-8d1f-1a80fb2c923d.png",
            "StudioName": "Minecraft",
            "Editable": false,
            "ReleaseID": 2819,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Minecraft",
            "TitleImageUrl": "/pt2images/BoxArt_Minecraft.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        },
        {
          Row: 6,
          Span: 1,
          Item: {
            "TitleName": "Forza Motorsport 7",
            "CodeName": "Apollo",
            "ReleaseDescription": "Barrett-Jackson Car Pack",
            "PlatformType": "Xbox One",
            "RTWDate": "2019-01-02T00:00:00",
            "RTMDate": "1900-01-01T00:00:00",
            "ReleaseType": "DLC",
            "ReleaseStatus": "Not POR",
            "ReleaseImageUrl": "/pt2images/3cb30be2-b17c-4546-8910-caa5b7a72ffe.jpg",
            "StudioName": "Turn 10",
            "Editable": false,
            "ReleaseID": 2884,
            "GADateFormat": "MM/DD/YYYY",
            "IsGamePassEligible": false,
            "GPStartDate": null,
            "GPEndDate": null,
            "FranchiseName": "Forza",
            "TitleImageUrl": "/pt2images/BoxArt_ForzaMotorsport7.png",
            "PlatformID": 2,
            "PlatformSortOrder": 1
          }
        }
      ]
    },
  ];

  const iconLinksMap = {
    '1': {path: './Images/gameSystemIcons/Icon_Win10.svg', alt: 'Windows 10 Edition Icon'},
    '2': {path: './Images/gameSystemIcons/Icon_Xbox.svg', alt: 'XBox One Icon'},
    '3': {path: './Images/gameSystemIcons/Icon_360.svg', alt: 'XBox 360 Icon', id: 3},
    '4': {path: './Images/gameSystemIcons/Icon_Steam.svg', alt: 'Steam Icon'},
    '5': {path: './Images/gameSystemIcons/Icon_iOS.svg', alt: 'iOS Icon'},
    '6': {path: './Images/gameSystemIcons/Icon_Android.svg', alt: 'Android Icon'},
    '7': {path: './Images/gameSystemIcons/Win8.svg', alt: 'Windows 8 Edition Icon'},
    '8': {path: './Images/gameSystemIcons/Win7.svg', alt: 'Windows 7 Edition Icon'},
    '9': {path: './Images/gameSystemIcons/Icon_Win10.svg', alt: 'Windows 10 Mobile Icon'},
    '10': {path: './Images/gameSystemIcons/Icon_Win10.svg', alt: 'Windows 8 Mobile Edition Icon'},
    '11': {path: './Images/gameSystemIcons/Win8.svg', alt: 'Windows 7/8 Edition Icon'},
    '12': {path: './Images/gameSystemIcons/Icon_PocketEdition.svg', alt: 'Pocket Edition Icon'},
    '13': {path: './Images/gameSystemIcons/PS3.svg', alt: 'Playstation 3 Icon'},
    '14': {path: './Images/gameSystemIcons/PS4.svg', alt: 'Playstation 4 Icon'},
    '15': {path: './Images/gameSystemIcons/Platform_AppleTV.svg', alt: 'AppleTV icon'},
    '16': {path: './Images/gameSystemIcons/Icon_WiiU.svg', alt: 'WiiU icon'},
    '17': {path: './Images/gameSystemIcons/Icon_Switch.svg', alt: 'Switch Icon'},
    '18': {path: './Images/gameSystemIcons/MacOS.svg', alt: 'MacOS Icon'},
    '19': {path: './Images/gameSystemIcons/Platform_3DS.svg', alt: 'Nintendo3DS Icon'}
  };

  const container = document.getElementById('container');

  generateGrid(data);
  registerEventForCard();
  resizeAllGridItems();

  // Get data from Service / Mock and generate basic HTML for grid system
  function generateGrid(data) {
    let html = '';

    const cardsAndTotalCol = generateCardsAndCalcTotalCol(data);
    html += cardsAndTotalCol.cardsHtml;
    const totalCol = cardsAndTotalCol.totalCol;

    // Generate Header
    const headerHtml = generateHeader(data, totalCol);
    html += headerHtml;

    // Specify how many columns for the grid and width for each column
    container.style['grid-template-columns'] = `repeat(${totalCol}, 313px)`;

    container.innerHTML = html;
  }

  function generateCardsAndCalcTotalCol(data) {
    let totalCol = data.length;

    let cardsHtml = '';
    for (let i = 0; i < data.length; i++) {
      const cards = data[i]['Data'];

      for (let j = 0; j < cards.length; j++) {
        // There are some cards need more columns than length of 'data' to display
        // So calculate the final columns need to render all cards with its span
        const numberOfCol = data[i]['Col'] + cards[j]['Span'] - 1; // -1 because we already have 1 column for card where it's standing. Eg: Col 6, Span 1: need total 6 Cols.
        if (numberOfCol > totalCol) {
          totalCol = numberOfCol;
        }

        const numOfReleases = 2 + Math.round(Math.random() * 10);

        let releaseHtml = '';

        for (let k = 0; k < numOfReleases; k++) {
          const iconID = 1 + Math.floor(Math.random() * 19);
          const date = new Date(data[i]['MonthYear'].split(" ").join(" 1 "));
          const htmlDate = date.getMonth() + 1 + '/' + date.getDay() + '/' + date.getFullYear();
          releaseHtml += `<p class="release">
                <img src="${iconLinksMap[iconID].path}" alt="${iconLinksMap[cards[j]['Item']['PlatformID']].alt}" />
                <span class="release-date">${htmlDate}</span>
            </p>`;
        }

        // Generate Card. Specify which its column and how many columns it will span
        const card = `
            <div class="card col-${i + 1}" style="grid-column: ${data[i]['Col']} / span ${cards[j]['Span']};">
                <div class="content">
                    <div class="main-area">
                        <image src="https://pt2uat.blob.core.windows.net${cards[j]['Item']['ReleaseImageUrl']}" />
                        <h6>${cards[j]['Item']['TitleName']}</h6>
                        <p>${cards[j]['Item']['CodeName']}</p>
                        <p class="num-of-releases">${numOfReleases} release(s)</p>
                    </div>
                    <div class="description">
                        <div class="release-desc">
                            <p>${cards[j]['Item']['ReleaseDescription']}</p>
                            <p>${cards[j]['Item']['ReleaseType']}</p>
                        </div>
                        ${releaseHtml}
                    </div>

                </div>
            </div>
        `;
        cardsHtml += card;
      }
    }

    return {
      cardsHtml: cardsHtml,
      totalCol: totalCol
    }
  }

  function generateHeader(data, totalCol) {
    let lastColFromData = 0;
    const monthNames = [
      "January", "February", "March",
      "April", "May", "June", "July",
      "August", "September", "October",
      "November", "December"
    ];

    let headerHtml = '';

    for (let i = 0; i < totalCol; i++) {
      let header = '';

      if (i < data.length) { // Using data from JSON
        header = `
            <div class="card header" style="grid-column: ${data[i]['Col']} / span 1; grid-row-start: 1">
                <div class="content">${data[i]['MonthYear']}</div>
            </div>
        `;
        lastColFromData = i;
      } else { // Generate more columns with continuous months if not enough
        const lastMonthYearFromData = new Date(data[lastColFromData]['MonthYear'].split(" ").join(" 1 "));
        lastMonthYearFromData.setMonth(lastMonthYearFromData.getMonth() + (i - lastColFromData));
        header = `
            <div class="card header" style="grid-column: ${i + 1} / span 1; grid-row-start: 1">
                <div class="content">${monthNames[lastMonthYearFromData.getMonth()]} ${lastMonthYearFromData.getFullYear()} </div>
            </div>
        `;
      }

      headerHtml += header;
    }

    return headerHtml;
  }

  function registerEventForCard() {
    var cards = document.querySelectorAll('.card:not(.header)');

    for (let i = 0; i < cards.length; i++) {
      cards[i].addEventListener('click', function (e) {
        // Calculate the row and column of clicking card base on with and height of each fragment. Remember each card may span to several fragments
        const gridColumns = window.getComputedStyle(this.parentElement).gridTemplateColumns.split(" ");
        const containerStyle = window.getComputedStyle(this.parentElement);
        const gridRows = window.getComputedStyle(this.parentElement).gridTemplateRows
        const xPosInGrid = this.getBoundingClientRect().left - this.parentElement.getBoundingClientRect().left;
        const yPosInGrid = this.getBoundingClientRect().top - this.parentElement.getBoundingClientRect().top;
        const gridRowHeight = parseFloat(containerStyle.gridAutoRows) + parseFloat(window.getComputedStyle(this.parentElement).gridRowGap);
        const gridColumnWidth = parseFloat(gridColumns[0]) + parseFloat(window.getComputedStyle(this.parentElement).gridColumnGap);
        const thisRow = Math.round(yPosInGrid / gridRowHeight) + 1;
        const thisColumn = Math.round(xPosInGrid / gridColumnWidth) + 1;

        // console.log('gridColumns', gridColumns)
        // console.log('gridRows', gridRows)
        // console.log('xPosInGrid', xPosInGrid)
        // console.log('yPosInGrid', yPosInGrid)
        // console.log('gridRowHeight', gridRowHeight)
        // console.log('gridColumnWidth', gridColumnWidth)
        // console.log('thisRow', thisRow)
        // console.log('thisColumn', thisColumn)
        // console.log('window.getComputedStyle(this.parentElement)', window.getComputedStyle(this.parentElement))

        // Reset all other cards
        for (let i of cards) {
          if (i !== this) {
            // Set all others cards to auto so 'dense' packaging will easy to fill the gap hole if possible
            i.style['grid-row-start'] = 'auto';

            // Close all other cards
            // i.classList.remove('expanded');
          }
        }

        this.style['grid-row-start'] = thisRow;
        this.classList.toggle('expanded');

        resizeAllGridItems();
        resizeGridItem(this);
      })
    }
  }


  // Resize the card to fit its content
  function resizeGridItem(card) {
    const rowHeight = parseInt(window.getComputedStyle(container).getPropertyValue('grid-auto-rows'));
    const rowGap = parseInt(window.getComputedStyle(container).getPropertyValue('grid-row-gap'));

    // Calculate number of span for the card base on the actual height of the card
    const rowSpan = Math.ceil((card.querySelector('.content').getBoundingClientRect().height + rowGap) / (rowHeight + rowGap));
    card.style.gridRowEnd = "span " + rowSpan;
  }

  function resizeAllGridItems() {
    const allItems = document.getElementsByClassName("card");
    for (let i = 0; i < allItems.length; i++) {
      resizeGridItem(allItems[i]);
    }
  }

</script>
</body>
</html>